<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#375EAB">

  <title>deliverclient - The Go Programming Language</title>

<link type="text/css" rel="stylesheet" href="../../../../../../lib/godoc/style.css">


<script>window.initFuncs = [];</script>

<script src="../../../../../../lib/godoc/jquery.js" defer></script>



<script>var goVersion = "go1.11.5";</script>
<script src="../../../../../../lib/godoc/godocs.js" defer></script>
</head>
<body>

<div id='lowframe' style="position: fixed; bottom: 0; left: 0; height: 0; width: 100%; border-top: thin solid grey; background-color: white; overflow: auto;">
...
</div><!-- #lowframe -->

<div id="topbar" class="wide"><div class="container">
<div class="top-heading" id="heading-wide"><a href="http://localhost:6060/">The Go Programming Language</a></div>
<div class="top-heading" id="heading-narrow"><a href="http://localhost:6060/">Go</a></div>
<a href="index.html#" id="menu-button"><span id="menu-button-arrow">&#9661;</span></a>
<form method="GET" action="http://localhost:6060/search">
<div id="menu">
<a href="http://localhost:6060/doc/">Documents</a>
<a href="../../../../../index.html">Packages</a>
<a href="http://localhost:6060/project/">The Project</a>
<a href="http://localhost:6060/help/">Help</a>

<a href="http://localhost:6060/blog/">Blog</a>


<span class="search-box"><input type="search" id="search" name="q" placeholder="Search" aria-label="Search" required><button type="submit"><span><!-- magnifying glass: --><svg width="24" height="24" viewBox="0 0 24 24"><title>submit search</title><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/><path d="M0 0h24v24H0z" fill="none"/></svg></span></button></span>
</div>
</form>

</div></div>



<div id="page" class="wide">
<div class="container">


  <h1>
    Package deliverclient
    <span class="text-muted"></span>
  </h1>







<div id="nav"></div>


<!--
	Copyright 2009 The Go Authors. All rights reserved.
	Use of this source code is governed by a BSD-style
	license that can be found in the LICENSE file.
-->
<!--
	Note: Static (i.e., not template-generated) href and id
	attributes start with "pkg-" to make it impossible for
	them to conflict with generated attributes (some of which
	correspond to Go identifiers).
-->

	<script>
	document.ANALYSIS_DATA = null;
	document.CALLGRAPH = null;
	</script>

	
		
		<div id="short-nav">
			<dl>
			<dd><code>import "github.com/hyperledger/fabric/core/deliverservice"</code></dd>
			</dl>
			<dl>
			<dd><a href="index.html#pkg-overview" class="overviewLink">Overview</a></dd>
			<dd><a href="index.html#pkg-index" class="indexLink">Index</a></dd>
			
			
				<dd><a href="index.html#pkg-subdirectories">Subdirectories</a></dd>
			
			</dl>
		</div>
		<!-- The package's Name is printed as title by the top-level template -->
		<div id="pkg-overview" class="toggleVisible">
			<div class="collapsed">
				<h2 class="toggleButton" title="Click to show Overview section">Overview ▹</h2>
			</div>
			<div class="expanded">
				<h2 class="toggleButton" title="Click to hide Overview section">Overview ▾</h2>
				
				
			</div>
		</div>

		<div id="pkg-index" class="toggleVisible">
		<div class="collapsed">
			<h2 class="toggleButton" title="Click to show Index section">Index ▹</h2>
		</div>
		<div class="expanded">
			<h2 class="toggleButton" title="Click to hide Index section">Index ▾</h2>

		<!-- Table of contents for API; must be named manual-nav to turn off auto nav. -->
			<div id="manual-nav">
			<dl>
			
			
			
				
				<dd><a href="index.html#DefaultABCFactory">func DefaultABCFactory(conn *grpc.ClientConn) orderer.AtomicBroadcastClient</a></dd>
			
				
				<dd><a href="index.html#DefaultConnectionFactory">func DefaultConnectionFactory(channelID string, endpointOverrides map[string]*comm.OrdererEndpoint) func(endpointCriteria comm.EndpointCriteria) (*grpc.ClientConn, error)</a></dd>
			
				
				<dd><a href="index.html#NewBFTDeliveryClient">func NewBFTDeliveryClient(chainID string, connFactory comm.ConnectionFactory, endpoints []comm.EndpointCriteria, clFactory clientFactory, ledgerInfoProvider blocksprovider.LedgerInfo, msgVerifier MessageCryptoVerifier) *bftDeliveryClient</a></dd>
			
				
				<dd><a href="index.html#NewBroadcastClient">func NewBroadcastClient(prod comm.ConnectionProducer, clFactory clientFactory, onConnect broadcastSetup, bos retryPolicy) *broadcastClient</a></dd>
			
				
				<dd><a href="index.html#NewDeliverService">func NewDeliverService(conf *Config, connConfig ConnectionCriteria) (*deliverServiceImpl, error)</a></dd>
			
			
				
				<dd><a href="index.html#Config">type Config</a></dd>
				
				
			
				
				<dd><a href="index.html#ConnectionCriteria">type ConnectionCriteria</a></dd>
				
				
			
				
				<dd><a href="index.html#DeliverService">type DeliverService</a></dd>
				
				
			
				
				<dd><a href="index.html#EndpointUpdater">type EndpointUpdater</a></dd>
				
				
			
				
				<dd><a href="index.html#MessageCryptoVerifier">type MessageCryptoVerifier</a></dd>
				
				
			
			
			</dl>
			</div><!-- #manual-nav -->

		

		
			<h3>Package files</h3>
			<p>
			<span style="font-size:90%">
			
				<a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/deliverservice/bft_client.go">bft_client.go</a>
			
				<a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/deliverservice/bft_header_receiver.go">bft_header_receiver.go</a>
			
				<a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/deliverservice/client.go">client.go</a>
			
				<a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/deliverservice/deliveryclient.go">deliveryclient.go</a>
			
				<a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/deliverservice/requester.go">requester.go</a>
			
			</span>
			</p>
		
		</div><!-- .expanded -->
		</div><!-- #pkg-index -->

		

		
		
		
			
			
			<h2 id="DefaultABCFactory">func <a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/deliverservice/deliveryclient.go?s=13648:13723#L368">DefaultABCFactory</a>
				<a class="permalink" href="index.html#DefaultABCFactory">&#xb6;</a>
				
				
			</h2>
			<pre>func DefaultABCFactory(conn *<a href="http://localhost:6060/pkg/google.golang.org/grpc/">grpc</a>.<a href="http://localhost:6060/pkg/google.golang.org/grpc/#ClientConn">ClientConn</a>) <a href="../../protos/orderer/index.html">orderer</a>.<a href="../../protos/orderer/index.html#AtomicBroadcastClient">AtomicBroadcastClient</a></pre>
			
			
			

		
			
			
			<h2 id="DefaultConnectionFactory">func <a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/deliverservice/deliveryclient.go?s=12097:12267#L335">DefaultConnectionFactory</a>
				<a class="permalink" href="index.html#DefaultConnectionFactory">&#xb6;</a>
				
				
			</h2>
			<pre>func DefaultConnectionFactory(channelID <a href="http://localhost:6060/pkg/builtin/#string">string</a>, endpointOverrides map[<a href="http://localhost:6060/pkg/builtin/#string">string</a>]*<a href="../comm/index.html">comm</a>.<a href="../comm/index.html#OrdererEndpoint">OrdererEndpoint</a>) func(endpointCriteria <a href="../comm/index.html">comm</a>.<a href="../comm/index.html#EndpointCriteria">EndpointCriteria</a>) (*<a href="http://localhost:6060/pkg/google.golang.org/grpc/">grpc</a>.<a href="http://localhost:6060/pkg/google.golang.org/grpc/#ClientConn">ClientConn</a>, <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
			
			
			

		
			
			
			<h2 id="NewBFTDeliveryClient">func <a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/deliverservice/bft_client.go?s=3317:3563#L77">NewBFTDeliveryClient</a>
				<a class="permalink" href="index.html#NewBFTDeliveryClient">&#xb6;</a>
				
				
			</h2>
			<pre>func NewBFTDeliveryClient(
    chainID <a href="http://localhost:6060/pkg/builtin/#string">string</a>,
    connFactory <a href="../comm/index.html">comm</a>.<a href="../comm/index.html#ConnectionFactory">ConnectionFactory</a>,
    endpoints []<a href="../comm/index.html">comm</a>.<a href="../comm/index.html#EndpointCriteria">EndpointCriteria</a>,
    clFactory clientFactory,
    ledgerInfoProvider <a href="blocksprovider/index.html">blocksprovider</a>.<a href="blocksprovider/index.html#LedgerInfo">LedgerInfo</a>,
    msgVerifier <a href="index.html#MessageCryptoVerifier">MessageCryptoVerifier</a>,
) *bftDeliveryClient</pre>
			
			
			

		
			
			
			<h2 id="NewBroadcastClient">func <a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/deliverservice/client.go?s=1629:1767#L43">NewBroadcastClient</a>
				<a class="permalink" href="index.html#NewBroadcastClient">&#xb6;</a>
				
				
			</h2>
			<pre>func NewBroadcastClient(prod <a href="../comm/index.html">comm</a>.<a href="../comm/index.html#ConnectionProducer">ConnectionProducer</a>, clFactory clientFactory, onConnect broadcastSetup, bos retryPolicy) *broadcastClient</pre>
			<p>
NewBroadcastClient returns a broadcastClient with the given params
</p>

			
			

		
			
			
			<h2 id="NewDeliverService">func <a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/deliverservice/deliveryclient.go?s=5911:6007#L166">NewDeliverService</a>
				<a class="permalink" href="index.html#NewDeliverService">&#xb6;</a>
				
				
			</h2>
			<pre>func NewDeliverService(conf *<a href="index.html#Config">Config</a>, connConfig <a href="index.html#ConnectionCriteria">ConnectionCriteria</a>) (*deliverServiceImpl, <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
			<p>
NewDeliverService construction function to create and initialize
delivery service instance. It tries to establish connection to
the specified in the configuration ordering service, in case it
fails to dial to it, return nil
</p>

			
			

		
		
			
			
			<h2 id="Config">type <a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/deliverservice/deliveryclient.go?s=3262:3977#L93">Config</a>
				<a class="permalink" href="index.html#Config">&#xb6;</a>
				
				
			</h2>
			<p>
Config dictates the DeliveryService&#39;s properties,
namely how it connects to an ordering service endpoint,
how it verifies messages received from it,
and how it disseminates the messages to other peers
</p>

			<pre>type Config struct {
<span id="Config.ConnFactory"></span>    <span class="comment">// ConnFactory returns a function that creates a connection to an endpoint</span>
    ConnFactory func(channelID <a href="http://localhost:6060/pkg/builtin/#string">string</a>, endpointOverrides map[<a href="http://localhost:6060/pkg/builtin/#string">string</a>]*<a href="../comm/index.html">comm</a>.<a href="../comm/index.html#OrdererEndpoint">OrdererEndpoint</a>) func(endpointCriteria <a href="../comm/index.html">comm</a>.<a href="../comm/index.html#EndpointCriteria">EndpointCriteria</a>) (*<a href="http://localhost:6060/pkg/google.golang.org/grpc/">grpc</a>.<a href="http://localhost:6060/pkg/google.golang.org/grpc/#ClientConn">ClientConn</a>, <a href="http://localhost:6060/pkg/builtin/#error">error</a>)
<span id="Config.ABCFactory"></span>    <span class="comment">// ABCFactory creates an AtomicBroadcastClient out of a connection</span>
    ABCFactory func(*<a href="http://localhost:6060/pkg/google.golang.org/grpc/">grpc</a>.<a href="http://localhost:6060/pkg/google.golang.org/grpc/#ClientConn">ClientConn</a>) <a href="../../protos/orderer/index.html">orderer</a>.<a href="../../protos/orderer/index.html#AtomicBroadcastClient">AtomicBroadcastClient</a>
<span id="Config.CryptoSvc"></span>    <span class="comment">// CryptoSvc performs cryptographic actions like message verification and signing</span>
    <span class="comment">// and identity validation</span>
    CryptoSvc <a href="../../gossip/api/index.html">api</a>.<a href="../../gossip/api/index.html#MessageCryptoService">MessageCryptoService</a>
<span id="Config.Gossip"></span>    <span class="comment">// Gossip enables to enumerate peers in the channel, send a message to peers,</span>
    <span class="comment">// and add a block to the gossip state transfer layer</span>
    Gossip <a href="blocksprovider/index.html">blocksprovider</a>.<a href="blocksprovider/index.html#GossipServiceAdapter">GossipServiceAdapter</a>
}
</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="ConnectionCriteria">type <a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/deliverservice/deliveryclient.go?s=4051:4624#L107">ConnectionCriteria</a>
				<a class="permalink" href="index.html#ConnectionCriteria">&#xb6;</a>
				
				
			</h2>
			<p>
ConnectionCriteria defines how to connect to ordering service nodes.
</p>

			<pre>type ConnectionCriteria struct {
    <span class="comment">// Endpoints specifies the endpoints of the ordering service.</span>
<span id="ConnectionCriteria.OrdererEndpoints"></span>    OrdererEndpoints []<a href="http://localhost:6060/pkg/builtin/#string">string</a>
<span id="ConnectionCriteria.Organizations"></span>    <span class="comment">// Organizations denotes a list of organizations</span>
    Organizations []<a href="http://localhost:6060/pkg/builtin/#string">string</a>
<span id="ConnectionCriteria.OrdererEndpointsByOrg"></span>    <span class="comment">// OrdererEndpointsByOrg specifies the endpoints of the ordering service grouped by orgs.</span>
    OrdererEndpointsByOrg map[<a href="http://localhost:6060/pkg/builtin/#string">string</a>][]<a href="http://localhost:6060/pkg/builtin/#string">string</a>
<span id="ConnectionCriteria.OrdererEndpointOverrides"></span>    <span class="comment">// OrdererEndpointOverrides specifies a map of endpoints to override.  The map</span>
    <span class="comment">// key is the configured endpoint address to match and the value is the</span>
    <span class="comment">// endpoint to use instead.</span>
    OrdererEndpointOverrides map[<a href="http://localhost:6060/pkg/builtin/#string">string</a>]*<a href="../comm/index.html">comm</a>.<a href="../comm/index.html#OrdererEndpoint">OrdererEndpoint</a>
}
</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="DeliverService">type <a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/deliverservice/deliveryclient.go?s=1552:2235#L47">DeliverService</a>
				<a class="permalink" href="index.html#DeliverService">&#xb6;</a>
				
				
			</h2>
			<p>
DeliverService used to communicate with orderers to obtain
new blocks and send them to the committer service
</p>

			<pre>type DeliverService interface {
    <span class="comment">// StartDeliverForChannel dynamically starts delivery of new blocks from ordering service</span>
    <span class="comment">// to channel peers.</span>
    <span class="comment">// When the delivery finishes, the finalizer func is called</span>
    StartDeliverForChannel(chainID <a href="http://localhost:6060/pkg/builtin/#string">string</a>, ledgerInfo <a href="blocksprovider/index.html">blocksprovider</a>.<a href="blocksprovider/index.html#LedgerInfo">LedgerInfo</a>, finalizer func()) <a href="http://localhost:6060/pkg/builtin/#error">error</a>

    <span class="comment">// StopDeliverForChannel dynamically stops delivery of new blocks from ordering service</span>
    <span class="comment">// to channel peers.</span>
    StopDeliverForChannel(chainID <a href="http://localhost:6060/pkg/builtin/#string">string</a>) <a href="http://localhost:6060/pkg/builtin/#error">error</a>

    <span class="comment">// UpdateEndpoints updates the ordering endpoints for the given chain.</span>
    UpdateEndpoints(chainID <a href="http://localhost:6060/pkg/builtin/#string">string</a>, connCriteria <a href="index.html#ConnectionCriteria">ConnectionCriteria</a>) <a href="http://localhost:6060/pkg/builtin/#error">error</a>

    <span class="comment">// Stop terminates delivery service and closes the connection</span>
    Stop()
}</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="EndpointUpdater">type <a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/deliverservice/deliveryclient.go?s=2665:2952#L77">EndpointUpdater</a>
				<a class="permalink" href="index.html#EndpointUpdater">&#xb6;</a>
				
				
			</h2>
			
			<pre>type EndpointUpdater interface {
    <span class="comment">// UpdateEndpoints updates the endpoint of the underlying client</span>
    UpdateEndpoints(endpoints []<a href="../comm/index.html">comm</a>.<a href="../comm/index.html#EndpointCriteria">EndpointCriteria</a>)
    <span class="comment">// GetEndpoint retrieves the orderer endpoint from which the client is receiving blocks (as opposed to headers)</span>
    GetEndpoint() <a href="http://localhost:6060/pkg/builtin/#string">string</a>
}</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="MessageCryptoVerifier">type <a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/deliverservice/bft_client.go?s=1279:1735#L34">MessageCryptoVerifier</a>
				<a class="permalink" href="index.html#MessageCryptoVerifier">&#xb6;</a>
				
				
			</h2>
			<p>
MessageCryptoVerifier defines message verification methods, and is subset of gossip/api/MessageCryptoService.
</p>

			<pre>type MessageCryptoVerifier interface {
    <span class="comment">// VerifyHeader returns nil when the header matches the metadata signature, but it does not compute the</span>
    <span class="comment">// block.Data.Hash() and compare it to the block.Header.DataHash, or otherwise inspect the block.Data.</span>
    <span class="comment">// This is used when the orderer delivers a block with header &amp; metadata only (i.e. block.Data==nil).</span>
    <span class="comment">// See: gossip/api/MessageCryptoService</span>
    VerifyHeader(chainID <a href="http://localhost:6060/pkg/builtin/#string">string</a>, signedBlock *<a href="../../protos/common/index.html">common</a>.<a href="../../protos/common/index.html#Block">Block</a>) <a href="http://localhost:6060/pkg/builtin/#error">error</a>
}</pre>

			

			

			
			
			

			

			
		
	

	





	
	
		<h2 id="pkg-subdirectories">Subdirectories</h2>
	
	<div class="pkg-dir">
		<table>
			<tr>
				<th class="pkg-name">Name</th>
				<th class="pkg-synopsis">Synopsis</th>
			</tr>

			
			<tr>
				<td colspan="2"><a href="../index.html">..</a></td>
			</tr>
			

			
				<tr>
				
					<td class="pkg-name" style="padding-left: 0px;">
						<a href="blocksprovider/index.html">blocksprovider</a>
					</td>
				
					<td class="pkg-synopsis">
						
					</td>
				</tr>
			
				<tr>
				
					<td class="pkg-name" style="padding-left: 0px;">
						<a href="mocks/index.html">mocks</a>
					</td>
				
					<td class="pkg-synopsis">
						
					</td>
				</tr>
			
		</table>
	</div>



<div id="footer">
Build version go1.11.5.<br>
Except as <a href="https://developers.google.com/site-policies#restrictions">noted</a>,
the content of this page is licensed under the
Creative Commons Attribution 3.0 License,
and code is licensed under a <a href="http://localhost:6060/LICENSE">BSD license</a>.<br>
<a href="http://localhost:6060/doc/tos.html">Terms of Service</a> |
<a href="http://www.google.com/intl/en/policies/privacy/">Privacy Policy</a>
</div>

</div><!-- .container -->
</div><!-- #page -->

</body>
</html>

