<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#375EAB">

  <title>cceventmgmt - The Go Programming Language</title>

<link type="text/css" rel="stylesheet" href="../../../../../../../lib/godoc/style.css">


<script>window.initFuncs = [];</script>

<script src="../../../../../../../lib/godoc/jquery.js" defer></script>



<script>var goVersion = "go1.11.5";</script>
<script src="../../../../../../../lib/godoc/godocs.js" defer></script>
</head>
<body>

<div id='lowframe' style="position: fixed; bottom: 0; left: 0; height: 0; width: 100%; border-top: thin solid grey; background-color: white; overflow: auto;">
...
</div><!-- #lowframe -->

<div id="topbar" class="wide"><div class="container">
<div class="top-heading" id="heading-wide"><a href="http://localhost:6060/">The Go Programming Language</a></div>
<div class="top-heading" id="heading-narrow"><a href="http://localhost:6060/">Go</a></div>
<a href="index.html#" id="menu-button"><span id="menu-button-arrow">&#9661;</span></a>
<form method="GET" action="http://localhost:6060/search">
<div id="menu">
<a href="http://localhost:6060/doc/">Documents</a>
<a href="../../../../../../index.html">Packages</a>
<a href="http://localhost:6060/project/">The Project</a>
<a href="http://localhost:6060/help/">Help</a>

<a href="http://localhost:6060/blog/">Blog</a>


<span class="search-box"><input type="search" id="search" name="q" placeholder="Search" aria-label="Search" required><button type="submit"><span><!-- magnifying glass: --><svg width="24" height="24" viewBox="0 0 24 24"><title>submit search</title><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/><path d="M0 0h24v24H0z" fill="none"/></svg></span></button></span>
</div>
</form>

</div></div>



<div id="page" class="wide">
<div class="container">


  <h1>
    Package cceventmgmt
    <span class="text-muted"></span>
  </h1>







<div id="nav"></div>


<!--
	Copyright 2009 The Go Authors. All rights reserved.
	Use of this source code is governed by a BSD-style
	license that can be found in the LICENSE file.
-->
<!--
	Note: Static (i.e., not template-generated) href and id
	attributes start with "pkg-" to make it impossible for
	them to conflict with generated attributes (some of which
	correspond to Go identifiers).
-->

	<script>
	document.ANALYSIS_DATA = null;
	document.CALLGRAPH = null;
	</script>

	
		
		<div id="short-nav">
			<dl>
			<dd><code>import "github.com/hyperledger/fabric/core/ledger/cceventmgmt"</code></dd>
			</dl>
			<dl>
			<dd><a href="index.html#pkg-overview" class="overviewLink">Overview</a></dd>
			<dd><a href="index.html#pkg-index" class="indexLink">Index</a></dd>
			
			
			</dl>
		</div>
		<!-- The package's Name is printed as title by the top-level template -->
		<div id="pkg-overview" class="toggleVisible">
			<div class="collapsed">
				<h2 class="toggleButton" title="Click to show Overview section">Overview ▹</h2>
			</div>
			<div class="expanded">
				<h2 class="toggleButton" title="Click to hide Overview section">Overview ▾</h2>
				
				
			</div>
		</div>

		<div id="pkg-index" class="toggleVisible">
		<div class="collapsed">
			<h2 class="toggleButton" title="Click to show Index section">Index ▹</h2>
		</div>
		<div class="expanded">
			<h2 class="toggleButton" title="Click to hide Index section">Index ▾</h2>

		<!-- Table of contents for API; must be named manual-nav to turn off auto nav. -->
			<div id="manual-nav">
			<dl>
			
			
			
				
				<dd><a href="index.html#Initialize">func Initialize(ccInfoProvider ChaincodeInfoProvider)</a></dd>
			
			
				
				<dd><a href="index.html#ChaincodeDefinition">type ChaincodeDefinition</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#ChaincodeDefinition.String">func (cdef *ChaincodeDefinition) String() string</a></dd>
				
			
				
				<dd><a href="index.html#ChaincodeInfoProvider">type ChaincodeInfoProvider</a></dd>
				
				
			
				
				<dd><a href="index.html#ChaincodeLifecycleEventListener">type ChaincodeLifecycleEventListener</a></dd>
				
				
			
				
				<dd><a href="index.html#KVLedgerLSCCStateListener">type KVLedgerLSCCStateListener</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#KVLedgerLSCCStateListener.HandleStateUpdates">func (listener *KVLedgerLSCCStateListener) HandleStateUpdates(trigger *ledger.StateUpdateTrigger) error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#KVLedgerLSCCStateListener.InterestedInNamespaces">func (listener *KVLedgerLSCCStateListener) InterestedInNamespaces() []string</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#KVLedgerLSCCStateListener.StateCommitDone">func (listener *KVLedgerLSCCStateListener) StateCommitDone(channelName string)</a></dd>
				
			
				
				<dd><a href="index.html#Mgr">type Mgr</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#GetMgr">func GetMgr() *Mgr</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#Mgr.ChaincodeDeployDone">func (m *Mgr) ChaincodeDeployDone(chainid string)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#Mgr.ChaincodeInstallDone">func (m *Mgr) ChaincodeInstallDone(succeeded bool)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#Mgr.HandleChaincodeDeploy">func (m *Mgr) HandleChaincodeDeploy(chainid string, chaincodeDefinitions []*ChaincodeDefinition) error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#Mgr.HandleChaincodeInstall">func (m *Mgr) HandleChaincodeInstall(chaincodeDefinition *ChaincodeDefinition, dbArtifacts []byte) error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#Mgr.Register">func (m *Mgr) Register(ledgerid string, l ChaincodeLifecycleEventListener)</a></dd>
				
			
			
			</dl>
			</div><!-- #manual-nav -->

		

		
			<h3>Package files</h3>
			<p>
			<span style="font-size:90%">
			
				<a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/ledger/cceventmgmt/defs.go">defs.go</a>
			
				<a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/ledger/cceventmgmt/lsccstate_listener.go">lsccstate_listener.go</a>
			
				<a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/ledger/cceventmgmt/mgr.go">mgr.go</a>
			
			</span>
			</p>
		
		</div><!-- .expanded -->
		</div><!-- #pkg-index -->

		

		
		
		
			
			
			<h2 id="Initialize">func <a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/ledger/cceventmgmt/mgr.go?s=324:377#L11">Initialize</a>
				<a class="permalink" href="index.html#Initialize">&#xb6;</a>
				
				
			</h2>
			<pre>func Initialize(ccInfoProvider <a href="index.html#ChaincodeInfoProvider">ChaincodeInfoProvider</a>)</pre>
			<p>
Initialize initializes event mgmt
</p>

			
			

		
		
			
			
			<h2 id="ChaincodeDefinition">type <a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/ledger/cceventmgmt/defs.go?s=275:439#L7">ChaincodeDefinition</a>
				<a class="permalink" href="index.html#ChaincodeDefinition">&#xb6;</a>
				
				
			</h2>
			<p>
ChaincodeDefinition captures the info about chaincode
</p>

			<pre>type ChaincodeDefinition struct {
<span id="ChaincodeDefinition.Name"></span>    Name              <a href="http://localhost:6060/pkg/builtin/#string">string</a>
<span id="ChaincodeDefinition.Hash"></span>    Hash              []<a href="http://localhost:6060/pkg/builtin/#byte">byte</a>
<span id="ChaincodeDefinition.Version"></span>    Version           <a href="http://localhost:6060/pkg/builtin/#string">string</a>
<span id="ChaincodeDefinition.CollectionConfigs"></span>    CollectionConfigs *<a href="../../../protos/common/index.html">common</a>.<a href="../../../protos/common/index.html#CollectionConfigPackage">CollectionConfigPackage</a>
}
</pre>

			

			

			
			
			

			

			
				
				<h3 id="ChaincodeDefinition.String">func (*ChaincodeDefinition) <a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/ledger/cceventmgmt/defs.go?s=441:489#L14">String</a>
					<a class="permalink" href="index.html#ChaincodeDefinition.String">&#xb6;</a>
					
					
				</h3>
				<pre>func (cdef *<a href="index.html#ChaincodeDefinition">ChaincodeDefinition</a>) String() <a href="http://localhost:6060/pkg/builtin/#string">string</a></pre>
				
				
				
				
			
		
			
			
			<h2 id="ChaincodeInfoProvider">type <a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/ledger/cceventmgmt/defs.go?s=1635:2379#L33">ChaincodeInfoProvider</a>
				<a class="permalink" href="index.html#ChaincodeInfoProvider">&#xb6;</a>
				
				
			</h2>
			<p>
ChaincodeInfoProvider interface enables event mgr to retrieve chaincode info for a given chaincode
</p>

			<pre>type ChaincodeInfoProvider interface {
    <span class="comment">// GetDeployedChaincodeInfo retrieves the details about the deployed chaincode.</span>
    <span class="comment">// This function is expected to return nil, if the chaincode with the given name is not deployed</span>
    <span class="comment">// or the version or hash of the deployed chaincode does not match with the given version and hash</span>
    GetDeployedChaincodeInfo(chainid <a href="http://localhost:6060/pkg/builtin/#string">string</a>, chaincodeDefinition *<a href="index.html#ChaincodeDefinition">ChaincodeDefinition</a>) (*<a href="../index.html">ledger</a>.<a href="../index.html#DeployedChaincodeInfo">DeployedChaincodeInfo</a>, <a href="http://localhost:6060/pkg/builtin/#error">error</a>)
    <span class="comment">// RetrieveChaincodeArtifacts checks if the given chaincode is installed on the peer and if yes,</span>
    <span class="comment">// it extracts the state db specific artifacts from the chaincode package tarball</span>
    RetrieveChaincodeArtifacts(chaincodeDefinition *<a href="index.html#ChaincodeDefinition">ChaincodeDefinition</a>) (installed <a href="http://localhost:6060/pkg/builtin/#bool">bool</a>, dbArtifactsTar []<a href="http://localhost:6060/pkg/builtin/#byte">byte</a>, err <a href="http://localhost:6060/pkg/builtin/#error">error</a>)
}</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="ChaincodeLifecycleEventListener">type <a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/ledger/cceventmgmt/defs.go?s=834:1531#L21">ChaincodeLifecycleEventListener</a>
				<a class="permalink" href="index.html#ChaincodeLifecycleEventListener">&#xb6;</a>
				
				
			</h2>
			<p>
ChaincodeLifecycleEventListener interface enables ledger components (mainly, intended for statedb)
to be able to listen to chaincode lifecycle events. &#39;dbArtifactsTar&#39; represents db specific artifacts
(such as index specs) packaged in a tar
</p>

			<pre>type ChaincodeLifecycleEventListener interface {
    <span class="comment">// HandleChaincodeDeploy is invoked when chaincode installed + defined becomes true.</span>
    <span class="comment">// The expected usage are to creates all the necessary statedb structures (such as indexes) and update</span>
    <span class="comment">// service discovery info. This function is invoked immediately before the committing the state changes</span>
    <span class="comment">// that contain chaincode definition or when a chaincode install happens</span>
    HandleChaincodeDeploy(chaincodeDefinition *<a href="index.html#ChaincodeDefinition">ChaincodeDefinition</a>, dbArtifactsTar []<a href="http://localhost:6060/pkg/builtin/#byte">byte</a>) <a href="http://localhost:6060/pkg/builtin/#error">error</a>
    <span class="comment">// ChaincodeDeployDone is invoked after the chaincode deployment is finished - `succeeded` indicates</span>
    <span class="comment">// whether the deploy finished successfully</span>
    ChaincodeDeployDone(succeeded <a href="http://localhost:6060/pkg/builtin/#bool">bool</a>)
}</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="KVLedgerLSCCStateListener">type <a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/ledger/cceventmgmt/lsccstate_listener.go?s=303:412#L5">KVLedgerLSCCStateListener</a>
				<a class="permalink" href="index.html#KVLedgerLSCCStateListener">&#xb6;</a>
				
				
			</h2>
			<p>
KVLedgerLSCCStateListener listens for state changes for chaincode lifecycle
</p>

			<pre>type KVLedgerLSCCStateListener struct {
<span id="KVLedgerLSCCStateListener.DeployedChaincodeInfoProvider"></span>    DeployedChaincodeInfoProvider <a href="../index.html">ledger</a>.<a href="../index.html#DeployedChaincodeInfoProvider">DeployedChaincodeInfoProvider</a>
}
</pre>

			

			

			
			
			

			

			
				
				<h3 id="KVLedgerLSCCStateListener.HandleStateUpdates">func (*KVLedgerLSCCStateListener) <a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/ledger/cceventmgmt/lsccstate_listener.go?s=681:784#L12">HandleStateUpdates</a>
					<a class="permalink" href="index.html#KVLedgerLSCCStateListener.HandleStateUpdates">&#xb6;</a>
					
					
				</h3>
				<pre>func (listener *<a href="index.html#KVLedgerLSCCStateListener">KVLedgerLSCCStateListener</a>) HandleStateUpdates(trigger *<a href="../index.html">ledger</a>.<a href="../index.html#StateUpdateTrigger">StateUpdateTrigger</a>) <a href="http://localhost:6060/pkg/builtin/#error">error</a></pre>
				<p>
HandleStateUpdates uses &#39;DeployedChaincodeInfoProvider&#39; to findout deployment of a chaincode
and invokes `HandleChaincodeDeploy` function on chaincode event manager (which in turn is responsible for creation of statedb
artifacts for the chaincode statedata)
</p>

				
				
				
			
				
				<h3 id="KVLedgerLSCCStateListener.InterestedInNamespaces">func (*KVLedgerLSCCStateListener) <a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/ledger/cceventmgmt/lsccstate_listener.go?s=2081:2157#L43">InterestedInNamespaces</a>
					<a class="permalink" href="index.html#KVLedgerLSCCStateListener.InterestedInNamespaces">&#xb6;</a>
					
					
				</h3>
				<pre>func (listener *<a href="index.html#KVLedgerLSCCStateListener">KVLedgerLSCCStateListener</a>) InterestedInNamespaces() []<a href="http://localhost:6060/pkg/builtin/#string">string</a></pre>
				<p>
InterestedInNamespaces implements function from interface `ledger.StateListener`
</p>

				
				
				
			
				
				<h3 id="KVLedgerLSCCStateListener.StateCommitDone">func (*KVLedgerLSCCStateListener) <a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/ledger/cceventmgmt/lsccstate_listener.go?s=2300:2378#L48">StateCommitDone</a>
					<a class="permalink" href="index.html#KVLedgerLSCCStateListener.StateCommitDone">&#xb6;</a>
					
					
				</h3>
				<pre>func (listener *<a href="index.html#KVLedgerLSCCStateListener">KVLedgerLSCCStateListener</a>) StateCommitDone(channelName <a href="http://localhost:6060/pkg/builtin/#string">string</a>)</pre>
				<p>
StateCommitDone implements function from interface `ledger.StateListener`
</p>

				
				
				
			
		
			
			
			<h2 id="Mgr">type <a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/ledger/cceventmgmt/mgr.go?s=682:1270#L25">Mgr</a>
				<a class="permalink" href="index.html#Mgr">&#xb6;</a>
				
				
			</h2>
			<p>
Mgr encapsulate important interactions for events related to the interest of ledger
</p>

			<pre>type Mgr struct {
    <span class="comment">// contains filtered or unexported fields</span>
}
</pre>

			

			

			
			
			

			
				
				<h3 id="GetMgr">func <a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/ledger/cceventmgmt/mgr.go?s=559:577#L20">GetMgr</a>
					<a class="permalink" href="index.html#GetMgr">&#xb6;</a>
					
					
				</h3>
				<pre>func GetMgr() *<a href="index.html#Mgr">Mgr</a></pre>
				<p>
GetMgr returns the reference to singleton event manager
</p>

				
				
			

			
				
				<h3 id="Mgr.ChaincodeDeployDone">func (*Mgr) <a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/ledger/cceventmgmt/mgr.go?s=4008:4057#L85">ChaincodeDeployDone</a>
					<a class="permalink" href="index.html#Mgr.ChaincodeDeployDone">&#xb6;</a>
					
					
				</h3>
				<pre>func (m *<a href="index.html#Mgr">Mgr</a>) ChaincodeDeployDone(chainid <a href="http://localhost:6060/pkg/builtin/#string">string</a>)</pre>
				<p>
ChaincodeDeployDone is expected to be called when the deploy transaction state is committed
</p>

				
				
				
			
				
				<h3 id="Mgr.ChaincodeInstallDone">func (*Mgr) <a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/ledger/cceventmgmt/mgr.go?s=5882:5932#L124">ChaincodeInstallDone</a>
					<a class="permalink" href="index.html#Mgr.ChaincodeInstallDone">&#xb6;</a>
					
					
				</h3>
				<pre>func (m *<a href="index.html#Mgr">Mgr</a>) ChaincodeInstallDone(succeeded <a href="http://localhost:6060/pkg/builtin/#bool">bool</a>)</pre>
				<p>
ChaincodeInstallDone is expected to get invoked when chaincode install finishes
</p>

				
				
				
			
				
				<h3 id="Mgr.HandleChaincodeDeploy">func (*Mgr) <a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/ledger/cceventmgmt/mgr.go?s=2766:2868#L60">HandleChaincodeDeploy</a>
					<a class="permalink" href="index.html#Mgr.HandleChaincodeDeploy">&#xb6;</a>
					
					
				</h3>
				<pre>func (m *<a href="index.html#Mgr">Mgr</a>) HandleChaincodeDeploy(chainid <a href="http://localhost:6060/pkg/builtin/#string">string</a>, chaincodeDefinitions []*<a href="index.html#ChaincodeDefinition">ChaincodeDefinition</a>) <a href="http://localhost:6060/pkg/builtin/#error">error</a></pre>
				<p>
HandleChaincodeDeploy is expected to be invoked when a chaincode is deployed via a deploy transaction
The `chaincodeDefinitions` parameter contains all the chaincodes deployed in a block
We need to store the last received `chaincodeDefinitions` because this function is expected to be invoked
after the deploy transactions validation is performed but not committed yet to the ledger. Further, we
release the read lock after this function. This leaves a small window when a `chaincode install` can happen
before the deploy transaction is committed and hence the function `HandleChaincodeInstall` may miss finding
the deployed chaincode. So, in function `HandleChaincodeInstall`, we explicitly check for chaincode deployed
in this stored `chaincodeDefinitions`
</p>

				
				
				
			
				
				<h3 id="Mgr.HandleChaincodeInstall">func (*Mgr) <a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/ledger/cceventmgmt/mgr.go?s=4389:4493#L95">HandleChaincodeInstall</a>
					<a class="permalink" href="index.html#Mgr.HandleChaincodeInstall">&#xb6;</a>
					
					
				</h3>
				<pre>func (m *<a href="index.html#Mgr">Mgr</a>) HandleChaincodeInstall(chaincodeDefinition *<a href="index.html#ChaincodeDefinition">ChaincodeDefinition</a>, dbArtifacts []<a href="http://localhost:6060/pkg/builtin/#byte">byte</a>) <a href="http://localhost:6060/pkg/builtin/#error">error</a></pre>
				<p>
HandleChaincodeInstall is expected to get invoked during installation of a chaincode package
</p>

				
				
				
			
				
				<h3 id="Mgr.Register">func (*Mgr) <a href="http://localhost:6060/src/github.com/hyperledger/fabric/core/ledger/cceventmgmt/mgr.go?s=1683:1757#L45">Register</a>
					<a class="permalink" href="index.html#Mgr.Register">&#xb6;</a>
					
					
				</h3>
				<pre>func (m *<a href="index.html#Mgr">Mgr</a>) Register(ledgerid <a href="http://localhost:6060/pkg/builtin/#string">string</a>, l <a href="index.html#ChaincodeLifecycleEventListener">ChaincodeLifecycleEventListener</a>)</pre>
				<p>
Register registers a ChaincodeLifecycleEventListener for given ledgerid
Since, `Register` is expected to be invoked when creating/opening a ledger instance
</p>

				
				
				
			
		
	

	







<div id="footer">
Build version go1.11.5.<br>
Except as <a href="https://developers.google.com/site-policies#restrictions">noted</a>,
the content of this page is licensed under the
Creative Commons Attribution 3.0 License,
and code is licensed under a <a href="http://localhost:6060/LICENSE">BSD license</a>.<br>
<a href="http://localhost:6060/doc/tos.html">Terms of Service</a> |
<a href="http://www.google.com/intl/en/policies/privacy/">Privacy Policy</a>
</div>

</div><!-- .container -->
</div><!-- #page -->

</body>
</html>

