<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#375EAB">

  <title>minblockheight - The Go Programming Language</title>

<link type="text/css" rel="stylesheet" href="../../../../../../../../../../lib/godoc/style.css">


<script>window.initFuncs = [];</script>

<script src="../../../../../../../../../../lib/godoc/jquery.js" defer></script>



<script>var goVersion = "go1.11.5";</script>
<script src="../../../../../../../../../../lib/godoc/godocs.js" defer></script>
</head>
<body>

<div id='lowframe' style="position: fixed; bottom: 0; left: 0; height: 0; width: 100%; border-top: thin solid grey; background-color: white; overflow: auto;">
...
</div><!-- #lowframe -->

<div id="topbar" class="wide"><div class="container">
<div class="top-heading" id="heading-wide"><a href="http://localhost:6060/">The Go Programming Language</a></div>
<div class="top-heading" id="heading-narrow"><a href="http://localhost:6060/">Go</a></div>
<a href="index.html#" id="menu-button"><span id="menu-button-arrow">&#9661;</span></a>
<form method="GET" action="http://localhost:6060/search">
<div id="menu">
<a href="http://localhost:6060/doc/">Documents</a>
<a href="../../../../../../../../../index.html">Packages</a>
<a href="http://localhost:6060/project/">The Project</a>
<a href="http://localhost:6060/help/">Help</a>

<a href="http://localhost:6060/blog/">Blog</a>


<span class="search-box"><input type="search" id="search" name="q" placeholder="Search" aria-label="Search" required><button type="submit"><span><!-- magnifying glass: --><svg width="24" height="24" viewBox="0 0 24 24"><title>submit search</title><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/><path d="M0 0h24v24H0z" fill="none"/></svg></span></button></span>
</div>
</form>

</div></div>



<div id="page" class="wide">
<div class="container">


  <h1>
    Package minblockheight
    <span class="text-muted"></span>
  </h1>







<div id="nav"></div>


<!--
	Copyright 2009 The Go Authors. All rights reserved.
	Use of this source code is governed by a BSD-style
	license that can be found in the LICENSE file.
-->
<!--
	Note: Static (i.e., not template-generated) href and id
	attributes start with "pkg-" to make it impossible for
	them to conflict with generated attributes (some of which
	correspond to Go identifiers).
-->

	<script>
	document.ANALYSIS_DATA = null;
	document.CALLGRAPH = null;
	</script>

	
		
		<div id="short-nav">
			<dl>
			<dd><code>import "github.com/hyperledger/fabric-sdk-go/pkg/fab/events/client/peerresolver/minblockheight"</code></dd>
			</dl>
			<dl>
			<dd><a href="index.html#pkg-overview" class="overviewLink">Overview</a></dd>
			<dd><a href="index.html#pkg-index" class="indexLink">Index</a></dd>
			
			
			</dl>
		</div>
		<!-- The package's Name is printed as title by the top-level template -->
		<div id="pkg-overview" class="toggleVisible">
			<div class="collapsed">
				<h2 class="toggleButton" title="Click to show Overview section">Overview ▹</h2>
			</div>
			<div class="expanded">
				<h2 class="toggleButton" title="Click to hide Overview section">Overview ▾</h2>
				
				
			</div>
		</div>

		<div id="pkg-index" class="toggleVisible">
		<div class="collapsed">
			<h2 class="toggleButton" title="Click to show Index section">Index ▹</h2>
		</div>
		<div class="expanded">
			<h2 class="toggleButton" title="Click to hide Index section">Index ▾</h2>

		<!-- Table of contents for API; must be named manual-nav to turn off auto nav. -->
			<div id="manual-nav">
			<dl>
			
			
			
				
				<dd><a href="index.html#NewResolver">func NewResolver() peerresolver.Provider</a></dd>
			
				
				<dd><a href="index.html#WithBlockHeightLagThreshold">func WithBlockHeightLagThreshold(value int) options.Opt</a></dd>
			
				
				<dd><a href="index.html#WithReconnectBlockHeightThreshold">func WithReconnectBlockHeightThreshold(value int) options.Opt</a></dd>
			
			
				
				<dd><a href="index.html#PeerResolver">type PeerResolver</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#New">func New(dispatcher service.Dispatcher, context context.Client, channelID string, opts ...options.Opt) *PeerResolver</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#PeerResolver.Filter">func (r *PeerResolver) Filter(peers []fab.Peer) []fab.Peer</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#PeerResolver.Resolve">func (r *PeerResolver) Resolve(peers []fab.Peer) (fab.Peer, error)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#PeerResolver.SetBlockHeightLagThreshold">func (p PeerResolver) SetBlockHeightLagThreshold(value int)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#PeerResolver.SetFromBlock">func (p PeerResolver) SetFromBlock(value uint64)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#PeerResolver.SetLoadBalancePolicy">func (p PeerResolver) SetLoadBalancePolicy(value lbp.LoadBalancePolicy)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#PeerResolver.SetReconnectBlockHeightLagThreshold">func (p PeerResolver) SetReconnectBlockHeightLagThreshold(value int)</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#PeerResolver.SetSnapshot">func (p PeerResolver) SetSnapshot(value fab.EventSnapshot) error</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="index.html#PeerResolver.ShouldDisconnect">func (r *PeerResolver) ShouldDisconnect(peers []fab.Peer, connectedPeer fab.Peer) bool</a></dd>
				
			
			
			</dl>
			</div><!-- #manual-nav -->

		

		
			<h3>Package files</h3>
			<p>
			<span style="font-size:90%">
			
				<a href="http://localhost:6060/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/events/client/peerresolver/minblockheight/minblockheight.go">minblockheight.go</a>
			
				<a href="http://localhost:6060/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/events/client/peerresolver/minblockheight/opts.go">opts.go</a>
			
			</span>
			</p>
		
		</div><!-- .expanded -->
		</div><!-- #pkg-index -->

		

		
		
		
			
			
			<h2 id="NewResolver">func <a href="http://localhost:6060/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/events/client/peerresolver/minblockheight/minblockheight.go?s=1047:1087#L22">NewResolver</a>
				<a class="permalink" href="index.html#NewResolver">&#xb6;</a>
				
				
			</h2>
			<pre>func NewResolver() <a href="../index.html">peerresolver</a>.<a href="../index.html#Provider">Provider</a></pre>
			<p>
NewResolver returns a new &#34;min block height&#34; peer resolver provider.
</p>

			
			

		
			
			
			<h2 id="WithBlockHeightLagThreshold">func <a href="http://localhost:6060/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/events/client/peerresolver/minblockheight/opts.go?s=1520:1575#L33">WithBlockHeightLagThreshold</a>
				<a class="permalink" href="index.html#WithBlockHeightLagThreshold">&#xb6;</a>
				
				
			</h2>
			<pre>func WithBlockHeightLagThreshold(value <a href="http://localhost:6060/pkg/builtin/#int">int</a>) <a href="../../../../../common/options/index.html">options</a>.<a href="../../../../../common/options/index.html#Opt">Opt</a></pre>
			<p>
WithBlockHeightLagThreshold sets the block height lag threshold. If a peer is lagging behind
the most up-to-date peer by more than the given number of blocks then it will be excluded.
If set to 0 then only the most up-to-date peers are considered.
If set to -1 then all peers (regardless of block height) are considered for selection.
</p>

			
			

		
			
			
			<h2 id="WithReconnectBlockHeightThreshold">func <a href="http://localhost:6060/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/events/client/peerresolver/minblockheight/opts.go?s=2254:2315#L47">WithReconnectBlockHeightThreshold</a>
				<a class="permalink" href="index.html#WithReconnectBlockHeightThreshold">&#xb6;</a>
				
				
			</h2>
			<pre>func WithReconnectBlockHeightThreshold(value <a href="http://localhost:6060/pkg/builtin/#int">int</a>) <a href="../../../../../common/options/index.html">options</a>.<a href="../../../../../common/options/index.html#Opt">Opt</a></pre>
			<p>
WithReconnectBlockHeightThreshold indicates that the event client is to disconnect from the peer if the peer&#39;s
block height falls too far behind the other peers. If the connected peer lags more than the given number of blocks
then the client will disconnect from that peer and reconnect to another peer at a more acceptable block height.
If set to 0 then this feature is disabled.
NOTE: Setting this value too low may cause the event client to disconnect/reconnect too frequently, thereby affecting
performance.
</p>

			
			

		
		
			
			
			<h2 id="PeerResolver">type <a href="http://localhost:6060/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/events/client/peerresolver/minblockheight/minblockheight.go?s=905:973#L16">PeerResolver</a>
				<a class="permalink" href="index.html#PeerResolver">&#xb6;</a>
				
				
			</h2>
			<p>
PeerResolver is a peer resolver that chooses the best peer according to a block height lag threshold.
The maximum block height of all peers is determined and the peers whose block heights are under
the maximum height but above a provided &#34;lag&#34; threshold are load balanced. The other peers are
not considered.
</p>

			<pre>type PeerResolver struct {
    <span class="comment">// contains filtered or unexported fields</span>
}
</pre>

			

			

			
			
			

			
				
				<h3 id="New">func <a href="http://localhost:6060/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/events/client/peerresolver/minblockheight/minblockheight.go?s=1320:1436#L29">New</a>
					<a class="permalink" href="index.html#New">&#xb6;</a>
					
					
				</h3>
				<pre>func New(dispatcher <a href="../../../service/index.html">service</a>.<a href="../../../service/index.html#Dispatcher">Dispatcher</a>, context <a href="../../../../../common/providers/context/index.html">context</a>.<a href="../../../../../common/providers/context/index.html#Client">Client</a>, channelID <a href="http://localhost:6060/pkg/builtin/#string">string</a>, opts ...<a href="../../../../../common/options/index.html">options</a>.<a href="../../../../../common/options/index.html#Opt">Opt</a>) *<a href="index.html#PeerResolver">PeerResolver</a></pre>
				<p>
New returns a new &#34;min block height&#34; peer resolver.
</p>

				
				
			

			
				
				<h3 id="PeerResolver.Filter">func (*PeerResolver) <a href="http://localhost:6060/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/events/client/peerresolver/minblockheight/minblockheight.go?s=2253:2311#L48">Filter</a>
					<a class="permalink" href="index.html#PeerResolver.Filter">&#xb6;</a>
					
					
				</h3>
				<pre>func (r *<a href="index.html#PeerResolver">PeerResolver</a>) Filter(peers []<a href="../../../../../common/providers/fab/index.html">fab</a>.<a href="../../../../../common/providers/fab/index.html#Peer">Peer</a>) []<a href="../../../../../common/providers/fab/index.html">fab</a>.<a href="../../../../../common/providers/fab/index.html#Peer">Peer</a></pre>
				<p>
Filter returns the peers that are within a provided &#34;lag&#34; threshold from the highest block height of all peers.
</p>

				
				
				
			
				
				<h3 id="PeerResolver.Resolve">func (*PeerResolver) <a href="http://localhost:6060/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/events/client/peerresolver/minblockheight/minblockheight.go?s=2014:2080#L43">Resolve</a>
					<a class="permalink" href="index.html#PeerResolver.Resolve">&#xb6;</a>
					
					
				</h3>
				<pre>func (r *<a href="index.html#PeerResolver">PeerResolver</a>) Resolve(peers []<a href="../../../../../common/providers/fab/index.html">fab</a>.<a href="../../../../../common/providers/fab/index.html#Peer">Peer</a>) (<a href="../../../../../common/providers/fab/index.html">fab</a>.<a href="../../../../../common/providers/fab/index.html#Peer">Peer</a>, <a href="http://localhost:6060/pkg/builtin/#error">error</a>)</pre>
				<p>
Resolve returns the best peer according to a block height lag threshold. The maximum block height of
all peers is determined and the peers that are within a provided &#34;lag&#34; threshold are load balanced.
</p>

				
				
				
			
				
				<h3 id="PeerResolver.SetBlockHeightLagThreshold">func (PeerResolver) <a href="http://localhost:6060/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/events/client/peerresolver/minblockheight/opts.go?s=2720:2774#L64">SetBlockHeightLagThreshold</a>
					<a class="permalink" href="index.html#PeerResolver.SetBlockHeightLagThreshold">&#xb6;</a>
					
					
				</h3>
				<pre>func (p <a href="index.html#PeerResolver">PeerResolver</a>) SetBlockHeightLagThreshold(value <a href="http://localhost:6060/pkg/builtin/#int">int</a>)</pre>
				
				
				
				
			
				
				<h3 id="PeerResolver.SetFromBlock">func (PeerResolver) <a href="http://localhost:6060/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/events/client/peerresolver/minblockheight/opts.go?s=3150:3193#L78">SetFromBlock</a>
					<a class="permalink" href="index.html#PeerResolver.SetFromBlock">&#xb6;</a>
					
					
				</h3>
				<pre>func (p <a href="index.html#PeerResolver">PeerResolver</a>) SetFromBlock(value <a href="http://localhost:6060/pkg/builtin/#uint64">uint64</a>)</pre>
				
				
				
				
			
				
				<h3 id="PeerResolver.SetLoadBalancePolicy">func (PeerResolver) <a href="http://localhost:6060/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/events/client/peerresolver/minblockheight/opts.go?s=2482:2548#L55">SetLoadBalancePolicy</a>
					<a class="permalink" href="index.html#PeerResolver.SetLoadBalancePolicy">&#xb6;</a>
					
					
				</h3>
				<pre>func (p <a href="index.html#PeerResolver">PeerResolver</a>) SetLoadBalancePolicy(value <a href="../../lbp/index.html">lbp</a>.<a href="../../lbp/index.html#LoadBalancePolicy">LoadBalancePolicy</a>)</pre>
				
				
				
				
			
				
				<h3 id="PeerResolver.SetReconnectBlockHeightLagThreshold">func (PeerResolver) <a href="http://localhost:6060/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/events/client/peerresolver/minblockheight/opts.go?s=2975:3038#L73">SetReconnectBlockHeightLagThreshold</a>
					<a class="permalink" href="index.html#PeerResolver.SetReconnectBlockHeightLagThreshold">&#xb6;</a>
					
					
				</h3>
				<pre>func (p <a href="index.html#PeerResolver">PeerResolver</a>) SetReconnectBlockHeightLagThreshold(value <a href="http://localhost:6060/pkg/builtin/#int">int</a>)</pre>
				
				
				
				
			
				
				<h3 id="PeerResolver.SetSnapshot">func (PeerResolver) <a href="http://localhost:6060/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/events/client/peerresolver/minblockheight/opts.go?s=3268:3327#L83">SetSnapshot</a>
					<a class="permalink" href="index.html#PeerResolver.SetSnapshot">&#xb6;</a>
					
					
				</h3>
				<pre>func (p <a href="index.html#PeerResolver">PeerResolver</a>) SetSnapshot(value <a href="../../../../../common/providers/fab/index.html">fab</a>.<a href="../../../../../common/providers/fab/index.html#EventSnapshot">EventSnapshot</a>) <a href="http://localhost:6060/pkg/builtin/#error">error</a></pre>
				
				
				
				
			
				
				<h3 id="PeerResolver.ShouldDisconnect">func (*PeerResolver) <a href="http://localhost:6060/src/github.com/hyperledger/fabric-sdk-go/pkg/fab/events/client/peerresolver/minblockheight/minblockheight.go?s=3985:4071#L86">ShouldDisconnect</a>
					<a class="permalink" href="index.html#PeerResolver.ShouldDisconnect">&#xb6;</a>
					
					
				</h3>
				<pre>func (r *<a href="index.html#PeerResolver">PeerResolver</a>) ShouldDisconnect(peers []<a href="../../../../../common/providers/fab/index.html">fab</a>.<a href="../../../../../common/providers/fab/index.html#Peer">Peer</a>, connectedPeer <a href="../../../../../common/providers/fab/index.html">fab</a>.<a href="../../../../../common/providers/fab/index.html#Peer">Peer</a>) <a href="http://localhost:6060/pkg/builtin/#bool">bool</a></pre>
				<p>
ShouldDisconnect checks the current peer&#39;s block height relative to the block heights of the
other peers and disconnects the peer if the configured threshold is reached.
Returns false if the block height is acceptable; true if the client should be disconnected from the peer
</p>

				
				
				
			
		
	

	







<div id="footer">
Build version go1.11.5.<br>
Except as <a href="https://developers.google.com/site-policies#restrictions">noted</a>,
the content of this page is licensed under the
Creative Commons Attribution 3.0 License,
and code is licensed under a <a href="http://localhost:6060/LICENSE">BSD license</a>.<br>
<a href="http://localhost:6060/doc/tos.html">Terms of Service</a> |
<a href="http://www.google.com/intl/en/policies/privacy/">Privacy Policy</a>
</div>

</div><!-- .container -->
</div><!-- #page -->

</body>
</html>

